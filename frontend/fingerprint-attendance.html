<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fingerprint Attendance | AMS</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a365d 0%, #2b426b 50%, #3d5a80 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .attendance-container {
      background: #fff;
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .logo {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
    }

    h1 {
      color: #2b426b;
      margin-bottom: 10px;
      font-size: 24px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .datetime {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 30px;
    }

    .date {
      font-size: 18px;
      font-weight: bold;
      color: #2b426b;
    }

    .time {
      font-size: 36px;
      font-weight: bold;
      color: #333;
      font-family: 'Courier New', monospace;
    }

    .fingerprint-area {
      padding: 40px;
      margin: 20px 0;
      border: 3px dashed #ccc;
      border-radius: 15px;
      background: #f8f9fa;
      transition: all 0.3s ease;
    }

    .fingerprint-area.scanning {
      border-color: #2b426b;
      background: #e8f0fe;
      animation: pulse 1.5s infinite;
    }

    .fingerprint-area.success {
      border-color: #28a745;
      background: #d4edda;
    }

    .fingerprint-area.error {
      border-color: #dc3545;
      background: #f8d7da;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    .fingerprint-icon {
      font-size: 80px;
      color: #2b426b;
      margin-bottom: 15px;
    }

    .fingerprint-area.scanning .fingerprint-icon {
      animation: fingerBeat 1s infinite;
    }

    @keyframes fingerBeat {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.7; }
    }

    .fingerprint-text {
      font-size: 16px;
      color: #666;
    }

    .scan-btn {
      width: 100%;
      padding: 15px 30px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .scan-btn.primary {
      background: linear-gradient(135deg, #2b426b 0%, #3d5a80 100%);
      color: #fff;
    }

    .scan-btn.primary:hover {
      background: linear-gradient(135deg, #1a365d 0%, #2b426b 100%);
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(43, 66, 107, 0.4);
    }

    .scan-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .status-message {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      display: none;
    }

    .status-message.show {
      display: block;
    }

    .status-message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .status-message.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .user-info {
      margin-top: 20px;
      padding: 15px;
      background: #e8f0fe;
      border-radius: 10px;
      display: none;
    }

    .user-info.show {
      display: block;
    }

    .user-name {
      font-size: 20px;
      font-weight: bold;
      color: #2b426b;
    }

    .user-position {
      color: #666;
      font-size: 14px;
      text-transform: capitalize;
    }

    .attendance-type {
      margin-top: 10px;
      padding: 8px 20px;
      background: #28a745;
      color: #fff;
      border-radius: 20px;
      display: inline-block;
      font-weight: bold;
    }

    .back-link {
      margin-top: 20px;
      display: block;
      color: #fff;
      text-decoration: none;
      font-size: 14px;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    .connection-status {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .connection-status.connected {
      background: #d4edda;
      color: #155724;
    }

    .connection-status.disconnected {
      background: #f8d7da;
      color: #721c24;
    }

    .connection-status i {
      font-size: 10px;
    }

    .recent-activity {
      margin-top: 30px;
      text-align: left;
    }

    .recent-activity h3 {
      color: #2b426b;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .activity-list {
      max-height: 150px;
      overflow-y: auto;
    }

    .activity-item {
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-bottom: 8px;
      font-size: 13px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .activity-item .name {
      font-weight: bold;
      color: #333;
    }

    .activity-item .time {
      font-size: 12px;
      color: #666;
    }

    .activity-item .type {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 10px;
      background: #2b426b;
      color: #fff;
    }
  </style>
</head>
<body>
  <!-- Connection Status -->
  <div class="connection-status disconnected" id="connectionStatus">
    <i class="fa-solid fa-circle"></i>
    <span id="connectionText">Connecting to Live20R...</span>
  </div>

  <div class="attendance-container">
    <img src="assets/Dohinob logo.png" alt="Logo" class="logo">
    <h1>Fingerprint Attendance</h1>
    <p class="subtitle">Place your finger on the scanner to clock in/out</p>

    <!-- Date & Time Display -->
    <div class="datetime">
      <div class="date" id="currentDate">Loading...</div>
      <div class="time" id="currentTime">--:--:--</div>
    </div>

    <!-- Fingerprint Scanner Area -->
    <div class="fingerprint-area" id="fingerprintArea">
      <i class="fa-solid fa-fingerprint fingerprint-icon" id="fingerprintIcon"></i>
      <p class="fingerprint-text" id="fingerprintText">Ready to scan</p>
    </div>

    <!-- Scan Button -->
    <button class="scan-btn primary" id="scanBtn">
      <i class="fa-solid fa-fingerprint"></i>
      Start Scanning
    </button>

    <!-- Status Message -->
    <div class="status-message" id="statusMessage"></div>

    <!-- User Info (shown after successful scan) -->
    <div class="user-info" id="userInfo">
      <div class="user-name" id="userName"></div>
      <div class="user-position" id="userPosition"></div>
      <div class="attendance-type" id="attendanceType"></div>
    </div>

    <!-- Recent Activity -->
    <div class="recent-activity">
      <h3><i class="fa-solid fa-clock-rotate-left"></i> Recent Activity</h3>
      <div class="activity-list" id="activityList">
        <p style="color: #999; font-size: 12px; text-align: center;">No recent activity</p>
      </div>
    </div>
  </div>

  <a href="login.html" class="back-link">
    <i class="fa-solid fa-arrow-left"></i> Back to Login
  </a>

  <script src="js/fingerprint.js"></script>
  <script src="js/fingerprint-attendance.js"></script>
</body>
</html>
